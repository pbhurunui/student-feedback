<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 Student Feedback Comparative Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom Font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
            transition: background-color 0.5s ease;
        }
        /* Custom Scrollbar for better aesthetics */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #e0e0e0; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        /* Custom Card Styles for pop effect */
        .feedback-card {
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1), 0 6px 6px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(5px);
            background-color: rgba(255, 255, 255, 0.9);
        }
        .feedback-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15), 0 8px 8px rgba(0, 0, 0, 0.08);
        }

        /* Dynamic Theme Colors (defined in JS, set via attribute) */
        [data-theme="All Subjects"] .theme-bg-gradient { background: linear-gradient(135deg, #4F46E5, #8B5CF6); }
        [data-theme="Music"] .theme-bg-gradient { background: linear-gradient(135deg, #EF4444, #F97316); } /* Red/Orange for Music */
        [data-theme="Ako"] .theme-bg-gradient { background: linear-gradient(135deg, #10B981, #34D399); } /* Green for Ako */
        [data-theme="Digital Technology"] .theme-bg-gradient { background: linear-gradient(135deg, #06B6D4, #38BDF8); } /* Cyan/Blue for Digital Tech */
        
        [data-theme="All Subjects"] .theme-text { color: #4F46E5; }
        [data-theme="Music"] .theme-text { color: #EF4444; }
        [data-theme="Ako"] .theme-text { color: #10B981; }
        [data-theme="Digital Technology"] .theme-text { color: #06B6D4; }

        /* Ensure table text is readable against card background */
        .data-table th, .data-table td {
            padding: 12px;
            border-bottom: 1px solid #e5e7eb;
        }
    </style>
</head>
<body id="app-body" data-theme="All Subjects" class="min-h-screen p-4 sm:p-8">

    <div id="header-banner" class="theme-bg-gradient text-white rounded-xl p-6 mb-8 transition-all duration-500">
        <h1 class="text-3xl sm:text-4xl font-extrabold mb-1">2025 Student Feedback Dashboard</h1>
        <p class="text-lg font-light">Comparative Analysis: Term 1 (Foundation) vs. Term 3 (Growth)</p>
    </div>

    <div class="mb-8">
        <h2 class="text-xl font-semibold mb-3">Filter by Subject Focus:</h2>
        <div id="subject-filters" class="flex flex-wrap gap-3">
            <!-- Filter buttons will be inserted here by JavaScript -->
        </div>
    </div>

    <!-- Main Content Grid -->
    <div id="content-grid" class="grid grid-cols-1 lg:grid-cols-3 gap-6">

        <!-- Column 1: Executive Summary, Strengths, and Observation -->
        <div class="lg:col-span-1 space-y-6">
            <div id="executive-summary" class="feedback-card rounded-xl p-6">
                <h2 class="text-2xl font-bold theme-text mb-4">Executive Summary</h2>
                <p class="text-gray-700 leading-relaxed text-sm" id="summary-text"></p>
            </div>

            <div id="primary-strengths" class="feedback-card rounded-xl p-6">
                <h2 class="text-2xl font-bold theme-text mb-4">Primary Strengths (Maintain)</h2>
                <ul id="strengths-list" class="list-none space-y-3">
                    <!-- Strengths will be inserted here -->
                </ul>
            </div>

            <!-- LESSON OBSERVATION CARD -->
            <div id="lesson-observation" class="feedback-card rounded-xl p-6 border-l-4 border-yellow-500 bg-yellow-50/50">
                <h2 class="text-2xl font-bold text-yellow-700 mb-4 flex items-center">
                    <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.55 4.55a.5.5 0 010 .7l-4.55 4.55a.5.5 0 01-.7 0l-4.55-4.55a.5.5 0 010-.7l4.55-4.55a.5.5 0 01.7 0zM9 13a4 4 0 110-8 4 4 0 010 8z"></path></svg>
                    Lesson Observation Insight
                </h2>
                <p class="text-gray-700 leading-relaxed text-sm italic" id="observation-text"></p>
            </div>
            <!-- END LESSON OBSERVATION CARD -->
        </div>

        <!-- Column 2: Quantitative Metrics -->
        <div class="lg:col-span-2">
            <div id="metrics-comparison" class="feedback-card rounded-xl p-6">
                <h2 class="text-2xl font-bold theme-text mb-4">Quantitative Metric Comparison (T1 vs. T3)</h2>
                <div class="overflow-x-auto">
                    <table class="w-full data-table text-left text-sm">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-50 rounded-lg">
                            <tr>
                                <th scope="col" class="py-3 px-6 rounded-tl-lg">Metric</th>
                                <th scope="col" class="py-3 px-6">T1 Focus</th>
                                <th scope="col" class="py-3 px-6">T3 Focus</th>
                                <th scope="col" class="py-3 px-6">Change</th>
                                <th scope="col" class="py-3 px-6 rounded-tr-lg">Interpretation</th>
                            </tr>
                        </thead>
                        <tbody id="metrics-body">
                            <!-- Metrics will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Full-Width Row for Qualitative Themes and Optimization -->
        <div class="lg:col-span-3 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div id="qualitative-likes" class="feedback-card rounded-xl p-6">
                <h2 class="text-2xl font-bold theme-text mb-4">Qualitative Themes: Likes (T1 vs T3)</h2>
                <div class="grid grid-cols-2 gap-4 text-sm">
                    <div>
                        <h3 class="font-semibold text-base mb-2 text-gray-600">Term 1 Focus</h3>
                        <ul id="t1-likes-list" class="list-disc list-inside space-y-1 text-gray-700"></ul>
                    </div>
                    <div>
                        <h3 class="font-semibold text-base mb-2 text-gray-600">Term 3 Focus</h3>
                        <ul id="t3-likes-list" class="list-disc list-inside space-y-1 text-gray-700"></ul>
                    </div>
                </div>
                <p class="mt-4 text-xs italic text-gray-500" id="qualitative-insight"></p>
            </div>

            <div id="optimization-area" class="feedback-card rounded-xl p-6">
                <h2 class="text-2xl font-bold theme-text mb-4">Key Area for Optimization</h2>
                <ul id="optimization-list" class="list-none space-y-4">
                    <!-- Optimizations will be inserted here, dynamically based on subject -->
                </ul>
            </div>
        </div>
    </div>

    <script>
        const appBody = document.getElementById('app-body');
        const summaryText = document.getElementById('summary-text');
        const strengthsList = document.getElementById('strengths-list');
        const metricsBody = document.getElementById('metrics-body');
        const t1LikesList = document.getElementById('t1-likes-list');
        const t3LikesList = document.getElementById('t3-likes-list');
        const optimizationList = document.getElementById('optimization-list');
        const subjectFilters = document.getElementById('subject-filters');
        const qualitativeInsight = document.getElementById('qualitative-insight');
        const observationText = document.getElementById('observation-text');
        
        let currentSubject = "All Subjects"; 
        
        // --- 1. DATA MODEL (Now includes Lesson Observation and DYNAMIC Optimizations) ---
        
        const analysisData = {
            subjects: ["All Subjects", "Music", "Ako", "Digital Technology"],
            
            subjectData: {
                "All Subjects": {
                    summary: "The transition from Term 1 to Term 3 shows a highly positive trend. While baseline scores in T1 were strong, indicating a safe and comfortable learning environment, the T3 data suggests significant successful refinement of teaching methodology. Students in T3 provided more detailed and specific qualitative feedback, moving from praising the teacher's *persona* (friendly, chill, comfortable) in T1 to praising the teacher's *pedagogy* (practical application, clear alternative explanations, engaging activities) in T3. Performance across core metrics like **Clarity, Support, and Environment** is consistently high, suggesting robust and effective teaching.",
                    metrics: [
                        { metric: "Explanation Clarity (`How clearly do I explain...`)", t1: "High", t3: "Maintained/Slightly Higher", change: "Stable/Positive", interpretation: "Explanations remain consistently high quality, likely reaching a ceiling of 'Very Clear'." },
                        { metric: "Lesson Interest (`How interesting are the lessons?`)", t1: "High", t3: "**Slight Increase**", change: "**Growth**", interpretation: "The introduction of new activities/methods (e.g., Quizlet, practicals) appears to have positively impacted overall student interest." },
                        { metric: "Use of Different Methods (`Do I use different ways...?`)", t1: "High", t3: "Maintained", change: "Stable", interpretation: "Consistent use of varied resources (videos, activities, examples) across both terms." },
                        { metric: "Engagement/Enjoyment (`Do I make learning engaging...?`)", t1: "High", t3: "Maintained/Slightly Higher", change: "Stable/Positive", interpretation: "Students consistently find the learning experience engaging and enjoyable." },
                        { metric: "Speed of Feedback (`How quickly do I give feedback...?`)", t1: "High", t3: "Maintained", change: "Stable", interpretation: "Timely feedback is a consistent strength throughout the year." },
                        { metric: "Comfort Asking for Help (`How comfortable do you feel...?`)", t1: "**Very High**", t3: "**Very High**", change: "**Strength**", interpretation: "The consistent perception of a non-scary, supportive environment is a core strength." },
                        { metric: "Safe & Heard Environment (`Do I create an environment...?`)", t1: "**Very High**", t3: "**Very High**", change: "**Strength**", interpretation: "This core strength of the classroom environment has been successfully maintained." }
                    ],
                    qualitative: {
                        t1: ["The Environment: \"Chill,\" \"not a scary environment,\" \"comfortable.\"", "Relatability: \"Friendly and relatable,\"", "Clarity/Efficiency: \"Straightforward,\" \"get what needs to be done, done.\""],
                        t3: ["Practical Application: \"How much practical time we get.\"", "Differentiated Support: \"Always try to see our point of views.\"", "Engagement Methods: \"Very fun in the activities,\" specifically mentioning *Quizlet*."]
                    },
                    strengths: ["Supportive Climate", "Effective Feedback", "Differentiated Instruction"],
                    insight: "The shift indicates that the positive environment established early on allowed you to successfully implement and refine new, effective teaching strategies that students specifically recognize and value later in the year.",
                    observation: "Observation noted strong teacher presence and clear transition commands. Use of individual check-ins was effective during independent work. **Opportunity noted to consolidate instructions for group work before starting the task.**",
                    optimizations: [
                        {
                            title: "Consolidate Group Task Instructions",
                            description: "Address the Observation note by spending 2-3 minutes consolidating and visually displaying group instructions (success criteria, roles) before starting group tasks across all subjects.",
                            rationale: "Ensures all students and groups start the task correctly and reduces initial off-task behaviour, supporting the 'Growth' in lesson interest."
                        },
                        {
                            title: "Implement Structured Check-in Rotation",
                            description: "Implement a structured rotation to check in with every group/individual at least once every 10 minutes during practical work to quickly identify and solve stagnation issues.",
                            rationale: "Directly addresses T3 qualitative feedback about needing 'slightly more often' check-ins, converting general support into targeted monitoring."
                        }
                    ]
                },
                "Music": {
                    summary: "Music feedback indicates a sharp improvement driven primarily by **successful practical assessments** and high student comfort. The key growth area is balancing the popular practical work with more interactive theory lessons (e.g., virtual listening rooms).",
                    metrics: [
                        { metric: "Explanation Clarity (`How clearly do I explain...`)", t1: "Okay", t3: "Clear", change: "Improvement", interpretation: "Clearer explanation of notation/theory concepts in T3." },
                        { metric: "Lesson Interest (`How interesting are the lessons?`)", t1: "High", t3: "**Very High**", change: "**Major Growth**", interpretation: "Practical application (genre changes) drove interest significantly up." },
                        { metric: "Comfort Asking for Help (`How comfortable do you feel...?`)", t1: "Comfortable", t3: "**Very Comfortable**", change: "Strength", interpretation: "Maintained a supportive and approachable climate." },
                        { metric: "Engagement/Enjoyment (`Do I make learning engaging...?`)", t1: "High", t3: "A Lot", change: "Growth", interpretation: "Engagement is consistently high, particularly during performance-based activities." },
                    ],
                    qualitative: {
                        t1: ["The Environment: \"The music room is just really chill.\"", "Practical: \"I enjoy the practicals.\"", "Resources: Suggestion to \"use text books or something on how to read music\" (early resource need)."],
                        t3: ["Practical: \"How much practical time we get, and the practical assessments.\"", "Teacher: \"You actually spend time with us.\"", "Approachable: \"How approachable and respectful you are to students.\""]
                    },
                    strengths: ["Highly Engaging Practical Work", "Clear Focus on Individual Needs", "Supportive Climate"],
                    insight: "Music students shifted from general requests for resources in T1 to praising the specific structure and effectiveness of practicals in T3.",
                    observation: "The lesson focused heavily on practical rehearsal. Teacher utilized non-verbal cues (e.g., pointing, hand signals) effectively. **Challenge: Students occasionally struggled to find sheet music quickly; needs better systemization and centralized organization.**",
                    optimizations: [
                        {
                            title: "Improve Resource Systemization",
                            description: "Organize sheet music and shared resources into clearly labelled, centralized digital folders (e.g., Google Drive) or physical binders, following up on the observation note.",
                            rationale: "Directly addresses the observation challenge, minimizing transition time and preventing student frustration during practical setups."
                        },
                        {
                            title: "Gamify Theory via Quizlet & Live Rhythm Challenges",
                            description: "Prioritize creating and implementing more interactive theory elements (e.g., rhythm flashcards, Quizlet sets) to balance the high demand for practical work.",
                            rationale: "Converts the T1 request for theory resources into engaging activities, capitalizing on the overall 'Major Growth' in lesson interest."
                        }
                    ]
                },
                "Ako": {
                    summary: "Ako (Advisory/Wellbeing) feedback shows exceptional performance in building **trust and efficiency**. Students highly value the 'straight to the point' approach. The main focus for improvement is integrating *more* engaging group discussions into goal-setting.",
                    metrics: [
                        { metric: "Explanation Clarity (`How clearly do I explain...`)", t1: "Very Clear", t3: "Clear", change: "Maintained", interpretation: "The 'straight to the point' approach to goal setting and administrative tasks is highly effective." },
                        { metric: "Engagement/Enjoyment (`Do I make learning engaging...?`)", t1: "Often", t3: "A Lot", change: "Growth", interpretation: "Increased enjoyment from purposeful activities." },
                        { metric: "Comfort Asking for Help (`How comfortable do you feel...?`)", t1: "Comfortable", t3: "Very Comfortable", change: "Strength", interpretation: "The environment is consistently safe for personal/Ako discussions." },
                        { metric: "Safe & Heard Environment (`Do I create an environment...?`)", t1: "Often", t3: "Always", change: "Improvement", interpretation: "Perception of safety and being heard has increased significantly." },
                    ],
                    qualitative: {
                        t1: ["Efficiency: \"Very straightforward and don't mess about.\"", "Persona: \"Friendly and relatable.\""],
                        t3: ["Efficiency: \"U are straight to the point and short and clear on explaining things.\"", "Teacher: \"Always try to see our point of views.\"", "Quick Feedback: \"Very quick to get back results and feedback.\""]
                    },
                    strengths: ["High Clarity and Efficiency", "Consistent Support in Personal Goal Setting", "Positive Teacher/Student Relationship"],
                    insight: "The consistency and clarity of the Ako program from T1 to T3 established high levels of student trust, moving from 'friendly' to 'efficient and trusted.'",
                    observation: "The session was highly personalized, focusing on student goal reviews. The teacher's **active listening was a clear strength**, with excellent follow-up questions. Challenge: Lack of whole-group activity limited peer inspiration and shared learning.",
                    optimizations: [
                        {
                            title: "Introduce Peer Inspiration Component",
                            description: "Add a 5-minute structured 'Goal Showcase' or 'Wins & Challenges' segment once a fortnight to facilitate whole-group discussion and shared learning, addressing the observation challenge.",
                            rationale: "Combats the observation note that the lack of whole-group activity limits peer inspiration, leveraging the high level of existing student comfort."
                        },
                        {
                            title: "Integrate Interactive Wellbeing Scenarios",
                            description: "Use quick-fire ethical or social scenario discussions (e.g., 'What would you do if...') to make the wellbeing/theory components of Ako more engaging.",
                            rationale: "Builds on the 'Growth' in enjoyment while maintaining the program's necessary efficiency and straightforward approach."
                        }
                    ]
                },
                "Digital Technology": {
                    summary: "Digital Technology demonstrates solid progress, but T3 feedback highlights a need for **more active monitoring during collaborative coding/debugging sessions**. The core strength is making complex topics 'exciting' and fun, despite a perceived slight drop in interest during difficult project phases.",
                    metrics: [
                        { metric: "Explanation Clarity (`How clearly do I explain...`)", t1: "Clear", t3: "Clear", change: "Stable", interpretation: "Core technical instructions are clear." },
                        { metric: "Lesson Interest (`How interesting are the lessons?`)", t1: "Interesting", t3: "Neutral", change: "Slight Drop", interpretation: "May reflect frustration during complex T3 projects; needs intervention." },
                        { metric: "Use of Different Methods (`Do I use different ways...?`)", t1: "Often", t3: "Always", change: "**Growth**", interpretation: "Increased use of videos/demos/activities recognized by students." },
                        { metric: "Speed of Feedback (`How quickly do I give feedback...?`)", t1: "Quickly", t3: "Very Quickly", change: "Improvement", interpretation: "Feedback on practical work/code submission has become faster." },
                    ],
                    qualitative: {
                        t1: ["Activity: Suggestion to \"let me game more in class\" (high desire for fun/engagement)."],
                        t3: ["Excitement: \"The way you make it exciting.\"", "Improvement: \"Checking in to see if the groups need help slightly more often.\"", "Teacher: \"You are laid back.\""]
                    },
                    strengths: ["Engaging Complex Topics", "Varied Instructional Methods", "High Support When Asked"],
                    insight: "The growth in teaching methods is visible, but the complexity of T3 projects exposes a need for closer group monitoring to prevent student stagnation during debugging.",
                    observation: "Observation confirmed students were deeply engaged in coding challenges. The teacher circulated but **spent long periods with single, high-needs groups**. Opportunity: Implement a 'traffic light' or visible cue system for groups to signal immediate help needs.",
                    optimizations: [
                        {
                            title: "Tighter Debugging Rotation & Cue System",
                            description: "Implement a rapid 3-minute check-in rotation during practical debugging sessions. Use a visible 'Traffic Light' system (Red/Yellow/Green flags) for groups to signal immediate help needs, addressing both the Observation and T3 feedback.",
                            rationale: "Addresses the 'Slight Drop' in interest metric and the 'spent long periods with single groups' observation, ensuring more consistent support."
                        },
                        {
                            title: "Gamify Theory via Live-Coding Challenges",
                            description: "To boost engagement, use live, competitive coding challenges (like code-golf or small feature additions) for core technical concepts, leveraging the 'exciting' qualitative theme.",
                            rationale: "Counteracts potential frustration from T3 project complexity and leverages the T1 desire for more 'game-like' engagement."
                        }
                    ]
                }
            },

            // NOTE: Global optimization array removed since data is now subject-specific.
        };

        // --- 2. RENDERING FUNCTIONS ---
        
        function renderMetrics(metrics) {
            metricsBody.innerHTML = metrics.map(row => {
                const t1Content = row.t1.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                const t3Content = row.t3.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                const changeContent = row.change.replace(/\*\*(.*?)\*\*/g, '$1');
                
                return `
                    <tr class="bg-white border-b hover:bg-gray-50 text-gray-600">
                        <th scope="row" class="py-3 px-6 font-medium whitespace-nowrap">${row.metric}</th>
                        <td class="py-3 px-6">${t1Content}</td>
                        <td class="py-3 px-6">${t3Content}</td>
                        <td class="py-3 px-6 text-sm">
                            <span class="${row.change.includes('Growth') || row.change.includes('Positive') || row.change.includes('Improvement') ? 'text-green-600 font-semibold' : row.change.includes('Drop') ? 'text-red-600 font-semibold' : 'text-yellow-600'}">
                                ${changeContent}
                            </span>
                        </td>
                        <td class="py-3 px-6 text-xs italic text-gray-500">${row.interpretation}</td>
                    </tr>
                `;
            }).join('');
        }

        function renderQualitative(t1, t3, insight) {
            t1LikesList.innerHTML = t1.map(item => `<li>${item}</li>`).join('');
            t3LikesList.innerHTML = t3.map(item => `<li class="font-medium text-purple-700">${item}</li>`).join('');
            qualitativeInsight.innerHTML = `**T1 â†’ T3 Insight:** ${insight}`;
        }
        
        function renderStrengths(strengths) {
            strengthsList.innerHTML = strengths.map((s, index) => `
                <li class="flex items-start">
                    <span class="inline-block w-6 h-6 mr-3 rounded-full theme-bg-gradient text-white text-center flex items-center justify-center font-bold text-xs flex-shrink-0">${index + 1}</span>
                    <p class="text-gray-700 font-medium">${s}</p>
                </li>
            `).join('');
        }

        // UPDATED: Now receives the subject's optimization array directly
        function renderOptimizations(optimizations) {
            optimizationList.innerHTML = optimizations.map((opt, index) => {
                return `
                    <li class="border-l-4 border-r-2 p-4 rounded-lg bg-red-50/50 shadow-md transition-all duration-300">
                        <h3 class="font-bold text-lg text-red-700 mb-2 flex items-center">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                            ${index + 1}. ${opt.title}
                        </h3>
                        <p class="text-gray-700 mb-2">${opt.description}</p>
                        <div class="p-3 mt-2 rounded-md bg-white border border-dashed text-sm">
                            <span class="font-bold text-gray-600">Rationale:</span> <span class="text-gray-500">${opt.rationale}</span>
                        </div>
                    </li>
                `;
            }).join('');
        }

        function renderFilters(subjects) {
            subjectFilters.innerHTML = subjects.map(subject => {
                return `
                    <button 
                        data-subject="${subject}" 
                        onclick="setSubjectFilter('${subject}')"
                        class="px-4 py-2 rounded-full font-semibold text-sm transition-all duration-300 ease-in-out shadow-lg 
                        ${currentSubject === subject ? 'bg-indigo-600 text-white transform scale-105' : 'bg-white text-gray-700 hover:bg-gray-100'}"
                    >
                        ${subject}
                    </button>
                `;
            }).join('');
        }

        function renderObservation(text) {
            observationText.innerHTML = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        }

        // --- 3. CONTROLLER / EVENT HANDLER ---

        function setSubjectFilter(subject) {
            currentSubject = subject;
            appBody.setAttribute('data-theme', subject);
            
            const data = analysisData.subjectData[subject];

            // Render all subject-specific data
            summaryText.innerHTML = data.summary.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            renderMetrics(data.metrics);
            renderQualitative(data.qualitative.t1, data.qualitative.t3, data.insight);
            renderStrengths(data.strengths);
            renderObservation(data.observation);
            renderOptimizations(data.optimizations); // UPDATED to use subject-specific data

            // Re-render components that rely on the subject for styling/text
            renderFilters(analysisData.subjects);

            // Update main summary and title to reflect the focus change
            document.getElementById('header-banner').classList.add('animate-pulse');
            setTimeout(() => {
                document.getElementById('header-banner').classList.remove('animate-pulse');
            }, 500);
        }

        // --- 4. INITIALIZATION ---

        function initializeDashboard() {
            // Set up initial view to "All Subjects"
            setSubjectFilter(currentSubject); 
        }

        window.onload = initializeDashboard;

    </script>
</body>
</html>
